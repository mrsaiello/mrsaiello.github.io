<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" >
<html>
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="author" content="kjell at ieee dot org ">
<meta name="robots" content="index,follow">
<title>Danger with Comparing Doubles </title>
<link rel="stylesheet" type="text/css" href="../CAIstyle.css">
</head>

<body>
<!-- generated by CSSmaker.java, version 07/31/2006 on Mon Aug 07 22:27:04 EDT 2006 -->

<!-- ANSWER DIVISION -->

<div class="answer">
<h3>Answer:</h3>
<center>
<table border="1" bordercolor="blue" cellpadding="15" align="left" bgcolor="#ffffff" hspace="10">
<tr align="center"><td><code>12+4  &gt; 16</code> </td><td><code>5.2-1.2 &lt;= 2.0+2</code></td><td><code>2*3-4 == 1+1</code></td></tr>
<tr align="center"><td>false</td>
                 <td>true</td>
                 <td>true</tr>
</table>
</center>
<div class="clearfloats">  <!-- divs need something inside of them --> </div>

</div>

<!-- LESSON DIVISION -->
<div class="lesson">
<h1>Danger with Comparing Doubles </h1>
<A NAME="floating point, comparing"></A>
<p>
What do you imagine is the result of evaluating the Boolean expression:
</p>

<pre class="code">
4.0/3.0 == 1.0 + 1.0/3.0
</pre>

<p>
Probably you think that it is <em>true</em>.
Probably it is.
But not certainly.
Floating point arithmetic is not exact.
You should never trust an "exactly equals" comparison with floats.
The problem is that some numbers require an unlimited number of bits  
to be represented exactly.
For these numbers, 
even a 64 bit <code>double</code> is not exact.
</p>

<p>
You are familiar with this situation with paper-and-pencil arithmetic.
For example, is the following true?
</p>

<pre class="code">
1.0/3.0 == 0.3333333
</pre>

<p>
It is not true, because the decimal on the right is only
an approximation.
With more decimal places the approximation gets better,
but it is never equal to the fraction.
The same occurs with Java (and all other computer programming languages).
For example, 
the following might come out to be <em>false</em>:
</p>

<pre class="code">
1.0/10.0 == 0.1
</pre>

<p>
Sometimes when unquestionable precision is needed,
integer arithmetic is used.
This is one reason why Java has 64 bit <code>long</code> integers.
</p>


        <div class="clearfloats">  <!-- divs need something inside of them --> </div>
</div> <!-- end lesson -->

<!-- QUESTION DIVISION -->
<div class="question">
<h3> QUESTION 5:</h3>
<p>
What is the output of the following:
</p>

<pre class="code">
class DecimalFraction
{
  public static void main (String[] args)
  {
    float x = 1.0f;    // 1.0f means 1.0 float
    float y = 10.0f;
    
    if ( x/y == 0.1 )
      System.out.println("Buy the cookie!"  );
    else
      System.out.println("No cookie for you.");
  }
}
</pre>


     <div class="navigation">
     <a href="ch13_4.html"><img src="../backIcon.gif" alt="go to previous page" /></a> &nbsp; 
     <a href="../../cs151java.html#13"><img src="../homeIcon.gif" alt="go to home page" /></a> &nbsp;
     <a href="ch13_6.html"><img src="../nextIcon.gif" alt="go to next page" /></a>
     </p>
</div>

</body>
</html>
